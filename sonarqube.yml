--- 
- 
  hosts: all
  name: sonarqube
  tasks: 
    - 
      command: "echo \"SUCCESS\""
      name: "sonarqube test"
      register: output
    - 
      command: "echo \"SonarQube tests OK\""
      name: "sonarqube test"
      when: "output.stdout.find('SUCCESS') != -1"
    - 
      fail: ~
      msg: "SonarQube tests failed"
      when: "output.stdout.find('SUCCESS') == -1"
